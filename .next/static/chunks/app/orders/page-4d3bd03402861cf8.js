(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[569],{3280:function(e,t,s){Promise.resolve().then(s.bind(s,8433))},8433:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var a=s(9268),n=s(6304),r=s(5579),i=s(8050),o=s(6008),c=s(6006),l=s(2120),d=s(474);function u(){let{user:e,pageLevelLoader:t,setPageLevelLoader:s,allOrdersForUser:u,setAllOrdersForUser:m}=(0,c.useContext)(r.GlobalContext),h=(0,o.useRouter)();async function x(){s(!0);let t=await (0,i.ax)(null==e?void 0:e._id);t.success?(s(!1),m(t.data),d.Am.success(t.message,{position:d.Am.POSITION.TOP_RIGHT})):(s(!1),d.Am.error(t.message,{position:d.Am.POSITION.TOP_RIGHT}))}return((0,c.useEffect)(()=>{null!==e&&x()},[e]),console.log(u),t)?(0,a.jsx)("div",{className:"w-full min-h-screen flex justify-center items-center",children:(0,a.jsx)(l.Z,{color:"#000000",loading:t,size:30,"data-testid":"loader"})}):(0,a.jsxs)("section",{children:[(0,a.jsx)("div",{className:"mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsx)("div",{className:"mt-8 mx-auto max-w-screen-xl px-4 sm:px-6 lg:px-8",children:(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"px-4 py-6 sm:px-8 sm:py-10",children:(0,a.jsx)("div",{className:"flow-root",children:u&&u.length?(0,a.jsx)("ul",{className:"flex flex-col gap-4",children:u.map(e=>(0,a.jsxs)("li",{className:"bg-gray-200 shadow p-5 flex flex-col space-y-3 py-6 text-left",children:[(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsxs)("h1",{className:"font-bold text-lg mb-3 flex-1",children:["#order: ",e._id]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("p",{className:"mr-3 text-sm font-medium text-gray-900",children:"Total paid amount"}),(0,a.jsxs)("p",{className:"mr-3 text-2xl  font-semibold text-gray-900",children:["Rs ",e.totalPrice]})]})]}),(0,a.jsx)("div",{className:"flex gap-2",children:e.orderItems.map((e,t)=>(0,a.jsx)("div",{className:"shrink-0",children:(0,a.jsx)("img",{alt:"Order Item",className:"h-24 w-24 max-w-full rounded-lg object-cover",src:e&&e.product&&e.product.imageUrl})},t))}),(0,a.jsxs)("div",{className:"flex gap-5",children:[(0,a.jsx)("button",{className:"disabled:opacity-50 mt-5 mr-5  inline-block bg-black text-white px-5 py-3 text-xs font-medium uppercase tracking-wide",children:e.isProcessing?"Order is Processing":"Order is delivered"}),(0,a.jsx)("button",{onClick:()=>h.push("/orders/".concat(e._id)),className:" mt-5 mr-5  inline-block bg-black text-white px-5 py-3 text-xs font-medium uppercase tracking-wide",children:"View Order Details"})]})]},e._id))}):null})})})})}),(0,a.jsx)(n.Z,{})]})}},6304:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(9268),n=s(474);function r(){return(0,a.jsx)(n.Ix,{position:"top-right",autoClose:4e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light",rtl:!1})}s(2657)},5579:function(e,t,s){"use strict";s.r(t),s.d(t,{GlobalContext:function(){return o},default:function(){return u},initialCheckoutFormData:function(){return c}});var a=s(9268),n=s(1712),r=s(6008),i=s(6006);let o=(0,i.createContext)(null),c={shippingAddress:{},paymentMethod:"",totalPrice:0,isPaid:!1,paidAt:new Date,isProcessing:!0},l=["cart","checkout","account","orders","admin-view"],d=["/admin-view","/admin-view/add-product","/admin-view/all-products"];function u(e){let{children:t}=e,[s,u]=(0,i.useState)(!1),[m,h]=(0,i.useState)(!0),[x,p]=(0,i.useState)({loading:!1,id:""}),[f,g]=(0,i.useState)(null),[j,y]=(0,i.useState)(null),[w,v]=(0,i.useState)(null),[N,b]=(0,i.useState)(!1),[O,k]=(0,i.useState)([]),[S,P]=(0,i.useState)([]),[T,C]=(0,i.useState)({fullName:"",city:"",country:"",postalCode:"",address:""}),[I,_]=(0,i.useState)(c),[A,E]=(0,i.useState)([]),[Z,z]=(0,i.useState)(null),[B,G]=(0,i.useState)([]),R=(0,r.useRouter)(),J=(0,r.usePathname)();return(0,i.useEffect)(()=>{if(void 0!==n.Z.get("token")){g(!0);let e=JSON.parse(localStorage.getItem("user"))||{},t=JSON.parse(localStorage.getItem("cartItems"))||[];y(e),k(t)}else g(!1),y({})},[n.Z]),(0,i.useEffect)(()=>{"/register"!==J&&!J.includes("product")&&"/"!==J&&j&&0===Object.keys(j).length&&l.includes(J)>-1&&R.push("/login")},[j,J]),(0,i.useEffect)(()=>{null!==j&&j&&Object.keys(j).length>0&&(null==j?void 0:j.role)!=="admin"&&d.indexOf(J)>-1&&R.push("/unauthorized-page")},[j,J]),(0,a.jsx)(o.Provider,{value:{showNavModal:s,setShowNavModal:u,pageLevelLoader:m,setPageLevelLoader:h,isAuthUser:f,setIsAuthUser:g,user:j,setUser:y,componentLevelLoader:x,setComponentLevelLoader:p,currentUpdatedProduct:w,setCurrentUpdatedProduct:v,showCartModal:N,setShowCartModal:b,cartItems:O,setCartItems:k,addresses:S,setAddresses:P,addressFormData:T,setAddressFormData:C,checkoutFormData:I,setCheckoutFormData:_,allOrdersForUser:A,setAllOrdersForUser:E,orderDetails:Z,setOrderDetails:z,allOrdersForAllUsers:B,setAllOrdersForAllUsers:G},children:t})}},8050:function(e,t,s){"use strict";s.d(t,{Bi:function(){return o},ax:function(){return r},mg:function(){return n},s$:function(){return i},wr:function(){return c}});var a=s(1712);let n=async e=>{try{let t=await fetch("/api/order/create-order",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a.Z.get("token"))},body:JSON.stringify(e)}),s=await t.json();return s}catch(e){console.log(e)}},r=async e=>{try{let t=await fetch("/api/order/get-all-orders?id=".concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(a.Z.get("token"))}}),s=await t.json();return s}catch(e){console.log(e)}},i=async e=>{try{let t=await fetch("/api/order/order-details?id=".concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(a.Z.get("token"))}}),s=await t.json();return s}catch(e){console.log(e)}},o=async()=>{try{let e=await fetch("/api/admin/orders/get-all-orders",{method:"GET",headers:{Authorization:"Bearer ".concat(a.Z.get("token"))}}),t=await e.json();return t}catch(e){console.log(e)}},c=async e=>{try{let t=await fetch("/api/admin/orders/update-order",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a.Z.get("token"))},body:JSON.stringify(e)}),s=await t.json();return s}catch(e){console.log(e)}}},2657:function(){}},function(e){e.O(0,[513,253,698,744],function(){return e(e.s=3280)}),_N_E=e.O()}]);