(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[434,727,213,858,142],{9746:function(e,t,n){Promise.resolve().then(n.bind(n,9608))},9608:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var a=n(9268),s=n(6008),o=n(156),i=n(5579),c=n(1273),r=n(4779),l=n(6006),u=n(474);function d(e){let{item:t}=e,n=(0,s.usePathname)(),{setCurrentUpdatedProduct:d,setComponentLevelLoader:m,componentLevelLoader:f,user:h,showCartModal:p,setShowCartModal:g}=(0,l.useContext)(i.GlobalContext),x=(0,s.useRouter)(),j=n.includes("admin-view");async function w(e){m({loading:!0,id:e._id});let t=await (0,r.ak)(e._id);t.success?(m({loading:!1,id:""}),u.Am.success(t.message,{position:u.Am.POSITION.TOP_RIGHT}),x.refresh()):(u.Am.error(t.message,{position:u.Am.POSITION.TOP_RIGHT}),m({loading:!1,id:""}))}async function y(e){m({loading:!0,id:e._id});let t=await (0,c.Xq)({productID:e._id,userID:h._id});t.success?(u.Am.success(t.message,{position:u.Am.POSITION.TOP_RIGHT}),m({loading:!1,id:""}),g(!0)):(u.Am.error(t.message,{position:u.Am.POSITION.TOP_RIGHT}),m({loading:!1,id:""}),g(!0)),console.log(t)}return j?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>{d(t),x.push("/admin-view/add-product")},className:"mt-1.5 flex w-full justify-center bg-black px-5 py-3 text-xs font-medium uppercase tracking-wide text-white",children:"Update"}),(0,a.jsx)("button",{onClick:()=>w(t),className:"mt-1.5 flex w-full justify-center bg-black px-5 py-3 text-xs font-medium uppercase tracking-wide text-white",children:f&&f.loading&&t._id===f.id?(0,a.jsx)(o.Z,{text:"Deleting Product",color:"#ffffff",loading:f&&f.loading}):"DELETE"})]}):(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("button",{onClick:()=>y(t),className:"mt-1.5 flex w-full justify-center bg-black px-5 py-3 text-xs font-medium uppercase tracking-wide text-white",children:f&&f.loading&&f.id===t._id?(0,a.jsx)(o.Z,{text:"Adding to cart",color:"#ffffff",loading:f&&f.loading}):"Add To Cart"})})}function m(e){let{item:t}=e,n=(0,s.useRouter)();return(0,a.jsxs)("div",{onClick:()=>n.push("/product/".concat(t._id)),children:[(0,a.jsx)("div",{className:"overflow-hideen aspect-w-4 aspect-h-4 h-47",children:(0,a.jsx)("img",{src:t.imageUrl,alt:"Product image",className:"h-full w-full object-cover transition-all duration-300 group-hover:scale-125"})}),"yes"===t.onSale?(0,a.jsx)("div",{className:"absolute top-0 m-2 rounded-full bg-black",children:(0,a.jsx)("p",{className:"rounded-full  p-1 text-[8px] font-bold uppercase tracking-wide text-white sm:py-1 sm:px-3",children:"Sale"})}):null,(0,a.jsxs)("div",{className:"my-4 mx-auto flex w-10/12 flex-col items-start justify-between",children:[(0,a.jsxs)("div",{className:"mb-2 flex",children:[(0,a.jsx)("p",{className:"mr-3 text-sm font-semibold ".concat("yes"===t.onSale?"line-through":""),children:"Rs ".concat(t.price)}),"yes"===t.onSale?(0,a.jsx)("p",{className:"mr-3 text-sm font-semibold text-red-700",children:"Rs ".concat((t.price-t.price*(t.priceDrop/100)).toFixed(2))}):null,"yes"===t.onSale?(0,a.jsx)("p",{className:"mr-3 text-sm font-semibold",children:"-(".concat(t.priceDrop,"%)off")}):null]}),(0,a.jsx)("h3",{className:"md-2 text-gray-400 text-sm",children:t.name})]})]})}var f=n(6304);function h(e){let{data:t}=e,n=(0,s.useRouter)();return(0,l.useEffect)(()=>{n.refresh()},[]),(0,a.jsxs)("section",{className:"bg-white py-12 sm:py-16",children:[(0,a.jsx)("div",{className:"mx-auto max-w-screen-xl px-4 sm:px-6 lg:px-8",children:(0,a.jsx)("div",{className:"mt-10 grid grid-cols-2 gap-6 sm:grid-cols-4 sm:gap-4 lg:mt-16",children:t&&t.length?t.map(e=>(0,a.jsxs)("article",{className:"relative flex flex-col overflow-hidden border cursor-pointer",children:[(0,a.jsx)(m,{item:e}),(0,a.jsx)(d,{item:e})]},e._id)):null})}),(0,a.jsx)(f.Z,{})]})}},156:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var a=n(9268),s=n(2120);function o(e){let{text:t,color:n,loading:o,size:i}=e;return(0,a.jsxs)("span",{className:"flex gap-1 items-center",children:[t,(0,a.jsx)(s.Z,{color:n,loading:o,size:i||10,"data-testid":"loader"})]})}},6304:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var a=n(9268),s=n(474);function o(){return(0,a.jsx)(s.Ix,{position:"top-right",autoClose:4e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light",rtl:!1})}n(2657)},5579:function(e,t,n){"use strict";n.r(t),n.d(t,{GlobalContext:function(){return c},default:function(){return d},initialCheckoutFormData:function(){return r}});var a=n(9268),s=n(1712),o=n(6008),i=n(6006);let c=(0,i.createContext)(null),r={shippingAddress:{},paymentMethod:"",totalPrice:0,isPaid:!1,paidAt:new Date,isProcessing:!0},l=["cart","checkout","account","orders","admin-view"],u=["/admin-view","/admin-view/add-product","/admin-view/all-products"];function d(e){let{children:t}=e,[n,d]=(0,i.useState)(!1),[m,f]=(0,i.useState)(!0),[h,p]=(0,i.useState)({loading:!1,id:""}),[g,x]=(0,i.useState)(null),[j,w]=(0,i.useState)(null),[y,b]=(0,i.useState)(null),[S,v]=(0,i.useState)(!1),[N,k]=(0,i.useState)([]),[O,T]=(0,i.useState)([]),[P,E]=(0,i.useState)({fullName:"",city:"",country:"",postalCode:"",address:""}),[I,_]=(0,i.useState)(r),[A,C]=(0,i.useState)([]),[Z,D]=(0,i.useState)(null),[R,z]=(0,i.useState)([]),G=(0,o.useRouter)(),B=(0,o.usePathname)();return(0,i.useEffect)(()=>{if(void 0!==s.Z.get("token")){x(!0);let e=JSON.parse(localStorage.getItem("user"))||{},t=JSON.parse(localStorage.getItem("cartItems"))||[];w(e),k(t)}else x(!1),w({})},[s.Z]),(0,i.useEffect)(()=>{"/register"!==B&&!B.includes("product")&&"/"!==B&&j&&0===Object.keys(j).length&&l.includes(B)>-1&&G.push("/login")},[j,B]),(0,i.useEffect)(()=>{null!==j&&j&&Object.keys(j).length>0&&(null==j?void 0:j.role)!=="admin"&&u.indexOf(B)>-1&&G.push("/unauthorized-page")},[j,B]),(0,a.jsx)(c.Provider,{value:{showNavModal:n,setShowNavModal:d,pageLevelLoader:m,setPageLevelLoader:f,isAuthUser:g,setIsAuthUser:x,user:j,setUser:w,componentLevelLoader:h,setComponentLevelLoader:p,currentUpdatedProduct:y,setCurrentUpdatedProduct:b,showCartModal:S,setShowCartModal:v,cartItems:N,setCartItems:k,addresses:O,setAddresses:T,addressFormData:P,setAddressFormData:E,checkoutFormData:I,setCheckoutFormData:_,allOrdersForUser:A,setAllOrdersForUser:C,orderDetails:Z,setOrderDetails:D,allOrdersForAllUsers:R,setAllOrdersForAllUsers:z},children:t})}},1273:function(e,t,n){"use strict";n.d(t,{EI:function(){return i},Xq:function(){return s},tQ:function(){return o}});var a=n(1712);let s=async e=>{try{let t=await fetch("/api/cart/add-to-cart",{method:"POST",headers:{"content-type":"application/json",Authorization:"Bearer ".concat(a.Z.get("token"))},body:JSON.stringify(e)}),n=await t.json();return n}catch(e){console.log(e)}},o=async e=>{try{let t=await fetch("http://localhost:3000/api/cart/all-cart-items?id=".concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(a.Z.get("token"))}}),n=await t.json();return n}catch(e){console.log(e)}},i=async e=>{try{let t=await fetch("/api/cart/delete-from-cart?id=".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(a.Z.get("token"))}}),n=await t.json();return n}catch(e){console.log(e)}}},4779:function(e,t,n){"use strict";n.d(t,{Tw:function(){return i},ak:function(){return c},c0:function(){return o},xg:function(){return s}});var a=n(1712);let s=async e=>{try{let t=await fetch("/api/admin/add-product",{method:"POST",headers:{"content-type":"application/json",Authorization:"Bearer ".concat(a.Z.get("token"))},body:JSON.stringify(e)}),n=await t.json();return n}catch(e){console.log(e)}},o=async()=>{try{let e=await fetch("http://localhost:3000/api/admin/all-products",{method:"GET",cache:"no-store"}),t=await e.json();return t}catch(e){console.log(e)}},i=async e=>{try{let t=await fetch("/api/admin/update-product",{method:"PUT",headers:{"content-type":"application/json",Authorization:"Bearer ".concat(a.Z.get("token"))},cache:"no-store",body:JSON.stringify(e)}),n=await t.json();return n}catch(e){console.log(e)}},c=async e=>{try{let t=await fetch("/api/admin/delete-product?id=".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(a.Z.get("token"))}}),n=await t.json();return n}catch(e){console.log(e)}}},2657:function(){}},function(e){e.O(0,[513,253,698,744],function(){return e(e.s=9746)}),_N_E=e.O()}]);