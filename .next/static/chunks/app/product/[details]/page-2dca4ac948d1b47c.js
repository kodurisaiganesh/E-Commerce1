(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[704],{4359:function(e,t,s){Promise.resolve().then(s.bind(s,3863))},3863:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var a=s(9268),l=s(5579),r=s(6006),n=s(474),c=s(156),o=s(1273),i=s(6304);function d(e){let{item:t}=e,{setComponentLevelLoader:s,componentLevelLoader:d,user:u,setShowCartModal:m}=(0,r.useContext)(l.GlobalContext);async function x(e){s({loading:!0,id:""});let t=await (0,o.Xq)({productID:e._id,userID:u._id});t.success?(n.Am.success(t.message,{position:n.Am.POSITION.TOP_RIGHT}),s({loading:!1,id:""}),m(!0)):(n.Am.error(t.message,{position:n.Am.POSITION.TOP_RIGHT}),s({loading:!1,id:""}),m(!0))}return(0,a.jsxs)("section",{className:"mx-auto max-w-screen-xl px-4 sm:px-6 lg:px-8",children:[(0,a.jsx)("div",{className:"container mx-auto px-4",children:(0,a.jsxs)("div",{className:"lg:col-gap-12 xl:col-gap-16 mt-8 grid grid-cols-1 gap-12 lg:mt-12 lg:grid-cols-5 lg:gap-16",children:[(0,a.jsx)("div",{className:"lg:col-span-3 lg:row-end-1",children:(0,a.jsxs)("div",{className:"lg:flex lg:items-start",children:[(0,a.jsx)("div",{className:"lg:order-2 lg:ml-5",children:(0,a.jsx)("div",{className:"max-w-xl overflow-hidden rounded-lg",children:(0,a.jsx)("img",{src:t.imageUrl,className:"h-full w-full max-w-full object-cover",alt:"Product Details"})})}),(0,a.jsx)("div",{className:"mt-2 w-full lg:order-1 lg:w-32 lg:flex-shrink-0",children:(0,a.jsxs)("div",{className:"flex flex-row items-start lg:flex-col",children:[(0,a.jsx)("button",{type:"button",className:"flex-0 aspect-square mb-3 h-20 overflow-hidden rounded-lg border-2 border-gray-100 text-center",children:(0,a.jsx)("img",{src:t.imageUrl,className:"h-full w-full object-cover",alt:"Product Details"})}),(0,a.jsx)("button",{type:"button",className:"flex-0 aspect-square mb-3 h-20 overflow-hidden rounded-lg border-2 border-gray-100 text-center",children:(0,a.jsx)("img",{src:t.imageUrl,className:"h-full w-full object-cover",alt:"Product Details"})})]})})]})}),(0,a.jsxs)("div",{className:"lg:col-span-2 lg:row-span-2 lg:row-end-2",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:t&&t.name}),(0,a.jsxs)("div",{className:"mt-10 flex flex-col items-center justify-between space-y-4 botder-t border-b py-4 sm:flex-row sm:space-y-0",children:[(0,a.jsxs)("div",{className:"flex items-end",children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold mr-2 ".concat("yes"===t.onSale?"line-through":""),children:["Rs  ",t&&t.price]}),"yes"===t.onSale?(0,a.jsx)("h1",{className:"text-3xl font-bold text-red-700",children:"$".concat((t.price-t.price*(t.priceDrop/100)).toFixed(2))}):null]}),(0,a.jsx)("button",{type:"button",onClick:()=>x(t),className:"mt-1.5 inline-block bg-black px-5 py-3 text-xs font-medium tracking-wide uppercase text-white",children:d&&d.loading?(0,a.jsx)(c.Z,{text:"Adding to Cart",color:"#ffffff",loading:d&&d.loading}):"Add to Cart"})]}),(0,a.jsxs)("ul",{className:"mt-8 space-y-2",children:[(0,a.jsx)("li",{className:"flex items-center text-left text-sm font-medium text-gray-600",children:t&&t.deliveryInfo}),(0,a.jsx)("li",{className:"flex items-center text-left text-sm font-medium text-gray-600",children:"Cancel anytime"})]}),(0,a.jsxs)("div",{className:"lg:col-span-3",children:[(0,a.jsx)("div",{className:"border-b border-gray-400",children:(0,a.jsx)("nav",{className:"flex gap-4",children:(0,a.jsx)("a",{href:"#",className:"border-b-2 border-gray-900 py-4 text-sm font-medium text-gray-900",children:"Description"})})}),(0,a.jsx)("div",{className:"mt-8 flow-root sm:mt-12",children:t&&t.description})]})]})]})}),(0,a.jsx)(i.Z,{})]})}},156:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(9268),l=s(2120);function r(e){let{text:t,color:s,loading:r,size:n}=e;return(0,a.jsxs)("span",{className:"flex gap-1 items-center",children:[t,(0,a.jsx)(l.Z,{color:s,loading:r,size:n||10,"data-testid":"loader"})]})}},6304:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(9268),l=s(474);function r(){return(0,a.jsx)(l.Ix,{position:"top-right",autoClose:4e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light",rtl:!1})}s(2657)},5579:function(e,t,s){"use strict";s.r(t),s.d(t,{GlobalContext:function(){return c},default:function(){return u},initialCheckoutFormData:function(){return o}});var a=s(9268),l=s(1712),r=s(6008),n=s(6006);let c=(0,n.createContext)(null),o={shippingAddress:{},paymentMethod:"",totalPrice:0,isPaid:!1,paidAt:new Date,isProcessing:!0},i=["cart","checkout","account","orders","admin-view"],d=["/admin-view","/admin-view/add-product","/admin-view/all-products"];function u(e){let{children:t}=e,[s,u]=(0,n.useState)(!1),[m,x]=(0,n.useState)(!0),[f,g]=(0,n.useState)({loading:!1,id:""}),[h,p]=(0,n.useState)(null),[j,b]=(0,n.useState)(null),[N,v]=(0,n.useState)(null),[y,w]=(0,n.useState)(!1),[S,O]=(0,n.useState)([]),[k,P]=(0,n.useState)([]),[C,I]=(0,n.useState)({fullName:"",city:"",country:"",postalCode:"",address:""}),[A,E]=(0,n.useState)(o),[D,T]=(0,n.useState)([]),[Z,_]=(0,n.useState)(null),[z,G]=(0,n.useState)([]),q=(0,r.useRouter)(),B=(0,r.usePathname)();return(0,n.useEffect)(()=>{if(void 0!==l.Z.get("token")){p(!0);let e=JSON.parse(localStorage.getItem("user"))||{},t=JSON.parse(localStorage.getItem("cartItems"))||[];b(e),O(t)}else p(!1),b({})},[l.Z]),(0,n.useEffect)(()=>{"/register"!==B&&!B.includes("product")&&"/"!==B&&j&&0===Object.keys(j).length&&i.includes(B)>-1&&q.push("/login")},[j,B]),(0,n.useEffect)(()=>{null!==j&&j&&Object.keys(j).length>0&&(null==j?void 0:j.role)!=="admin"&&d.indexOf(B)>-1&&q.push("/unauthorized-page")},[j,B]),(0,a.jsx)(c.Provider,{value:{showNavModal:s,setShowNavModal:u,pageLevelLoader:m,setPageLevelLoader:x,isAuthUser:h,setIsAuthUser:p,user:j,setUser:b,componentLevelLoader:f,setComponentLevelLoader:g,currentUpdatedProduct:N,setCurrentUpdatedProduct:v,showCartModal:y,setShowCartModal:w,cartItems:S,setCartItems:O,addresses:k,setAddresses:P,addressFormData:C,setAddressFormData:I,checkoutFormData:A,setCheckoutFormData:E,allOrdersForUser:D,setAllOrdersForUser:T,orderDetails:Z,setOrderDetails:_,allOrdersForAllUsers:z,setAllOrdersForAllUsers:G},children:t})}},1273:function(e,t,s){"use strict";s.d(t,{EI:function(){return n},Xq:function(){return l},tQ:function(){return r}});var a=s(1712);let l=async e=>{try{let t=await fetch("/api/cart/add-to-cart",{method:"POST",headers:{"content-type":"application/json",Authorization:"Bearer ".concat(a.Z.get("token"))},body:JSON.stringify(e)}),s=await t.json();return s}catch(e){console.log(e)}},r=async e=>{try{let t=await fetch("http://localhost:3000/api/cart/all-cart-items?id=".concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(a.Z.get("token"))}}),s=await t.json();return s}catch(e){console.log(e)}},n=async e=>{try{let t=await fetch("/api/cart/delete-from-cart?id=".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(a.Z.get("token"))}}),s=await t.json();return s}catch(e){console.log(e)}}},2657:function(){}},function(e){e.O(0,[513,253,698,744],function(){return e(e.s=4359)}),_N_E=e.O()}]);