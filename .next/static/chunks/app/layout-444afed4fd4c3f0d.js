(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{781:function(e,t,n){Promise.resolve().then(n.bind(n,5579)),Promise.resolve().then(n.bind(n,7897)),Promise.resolve().then(n.t.bind(n,7064,23)),Promise.resolve().then(n.t.bind(n,8410,23))},156:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var l=n(9268),i=n(2120);function a(e){let{text:t,color:n,loading:a,size:o}=e;return(0,l.jsxs)("span",{className:"flex gap-1 items-center",children:[t,(0,l.jsx)(i.Z,{color:n,loading:a,size:o||10,"data-testid":"loader"})]})}},7897:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var l=n(9268),i=n(5579),a=n(8147),o=n(6006),r=n(9738),s=n(4910);function c(e){let{modalTitle:t,mainContent:n,showButtons:i,buttonComponent:a,show:c,setShow:d,showModalTitle:u}=e;return(0,l.jsx)(r.u.Root,{show:c,as:o.Fragment,children:(0,l.jsxs)(s.V,{as:"div",className:"relative z-10",onClose:d,children:[(0,l.jsx)(r.u.Child,{as:o.Fragment,enter:"ease-in-out duration-900",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in-out duration-500",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,l.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),(0,l.jsx)("div",{className:"fixed inset-0 overflow-hidden",children:(0,l.jsx)("div",{className:"absolute inset-0 overflow-hidden",children:(0,l.jsx)("div",{className:"fixed inset-y-0 right-0 flex max-w-full pl-10",children:(0,l.jsx)(r.u.Child,{as:o.Fragment,enter:"ease-in-out duration-900",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in-out duration-500",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,l.jsx)(s.V.Panel,{className:"w-screen max-w-md",children:(0,l.jsxs)("div",{className:"flex h-full flex-col overflow-y-scroll bg-white shadow-xl",children:[(0,l.jsxs)("div",{className:"flex-1 overflow-y-auto px-4 py-6 sm:px-6",children:[u?(0,l.jsx)("div",{className:"flex items-start justify-between",children:(0,l.jsx)(s.V.Title,{children:t})}):null,(0,l.jsx)("div",{className:"mt-20",children:n})]}),i?(0,l.jsx)("div",{className:"border-none px-4 py-6 sm:px-6",children:a}):null]})})})})})})]})})}var d=n(1712),u=n(6008),p=n(1273),m=n(474),h=n(156);function x(){let{showCartModal:e,setShowCartModal:t,cartItems:n,setCartItems:a,user:r,setComponentLevelLoader:s,componentLevelLoader:d}=(0,o.useContext)(i.GlobalContext),x=(0,u.useRouter)();async function y(){let e=await (0,p.tQ)(null==r?void 0:r._id);if(e.success){let t=e.data&&e.data.length?e.data.map(e=>({...e,productID:{...e.productID,price:"yes"===e.productID.onSale?parseInt((e.productID.price-e.productID.price*(e.productID.priceDrop/100)).toFixed(2)):e.productID.price}})):[];a(t),localStorage.setItem("cartItems",JSON.stringify(t))}console.log(e)}async function f(e){s({loading:!0,id:e});let t=await (0,p.EI)(e);t.success?(s({loading:!1,id:""}),m.Am.success(t.message,{position:m.Am.POSITION.TOP_RIGHT}),y()):(m.Am.error(t.message,{position:m.Am.POSITION.TOP_RIGHT}),s({loading:!1,id:e}))}return(0,o.useEffect)(()=>{null!==r&&y()},[r]),(0,l.jsx)(c,{showButtons:!0,show:e,setShow:t,mainContent:n&&n.length?(0,l.jsx)("ul",{role:"list",className:"-my-6 divide-y divide-gray-300",children:n.map(e=>(0,l.jsxs)("li",{className:"flex py-6",children:[(0,l.jsx)("div",{className:"h-24 w-24 flex-shrink-0 overflow-hidden rounded-md border border-gray-200",children:(0,l.jsx)("img",{src:e&&e.productID&&e.productID.imageUrl,alt:"Cart Item",className:"h-full w-full object-cover object-center"})}),(0,l.jsxs)("div",{className:"ml-4 flex flex-1 flex-col",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"flex justify-between text-base font-medium text-gray-900",children:(0,l.jsx)("h3",{children:(0,l.jsx)("a",{children:e&&e.productID&&e.productID.name})})}),(0,l.jsxs)("p",{className:"mt-1 text-sm text-gray-600",children:["Rs",e&&e.productID&&e.productID.price]})]}),(0,l.jsx)("div",{className:"flex flex-1 items-end justify-between text-sm",children:(0,l.jsx)("button",{type:"button",className:"font-medium text-yellow-600 sm:order-2",onClick:()=>f(e._id),children:d&&d.loading&&d.id===e._id?(0,l.jsx)(h.Z,{text:"Removing",color:"#000000",loading:d&&d.loading}):"Remove"})})]})]},e.id))}):null,buttonComponent:(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)("button",{type:"button",onClick:()=>{x.push("/cart"),t(!1)},className:"mt-1.5 w-full inline-block bg-black text-white px-5 py-3 text-xs font-medium uppercase tracking-wide",children:"Go To Cart"}),(0,l.jsx)("button",{disabled:n&&0===n.length,type:"button",onClick:()=>{x.push("/checkout"),t(!1)},className:"mt-1.5 w-full inline-block bg-black text-white px-5 py-3 text-xs font-medium uppercase tracking-wide disabled:opacity-50",children:"Checkout"}),(0,l.jsx)("div",{className:"mt-6 flex justify-center text-center text-sm text-gray-600",children:(0,l.jsxs)("button",{type:"button",className:"font-medium text-grey",children:["Continue Shopping",(0,l.jsx)("span",{"aria-hidden":"true",children:" â†’"})]})})]})})}function y(e){let{isModalView:t=!1,isAdminView:n,router:i}=e;return(0,l.jsx)("div",{className:"items-center justify-between w-full md:flex md:w-auto ".concat(t?"":"hidden"),id:"nav-items",children:(0,l.jsx)("ul",{className:"flex flex-col p-4 md:p-0 mt-4 font-medium  rounded-lg md:flex-row md:space-x-8 md:mt-0 md:border-0 bg-white ".concat(t?"border-none":"border border-gray-100"),children:n?a.GU.map(e=>(0,l.jsx)("li",{className:"cursor-pointer block py-2 pl-3 pr-4 text-gray-900 rounded md:p-0",onClick:()=>i.push(e.path),children:e.label},e.id)):a.p8.map(e=>(0,l.jsx)("li",{className:"cursor-pointer block py-2 pl-3 pr-4 text-gray-900 rounded md:p-0",onClick:()=>i.push(e.path),children:e.label},e.id))})})}function f(){let{showNavModal:e,setShowNavModal:t}=(0,o.useContext)(i.GlobalContext),{user:n,isAuthUser:a,setIsAuthUser:r,setUser:s,currentUpdatedProduct:p,setCurrentUpdatedProduct:m,showCartModal:h,setShowCartModal:f}=(0,o.useContext)(i.GlobalContext),b=(0,u.usePathname)(),g=(0,u.useRouter)();console.log(p,"navbar"),(0,o.useEffect)(()=>{"/admin-view/add-product"!==b&&null!==p&&m(null)},[b]);let w=b.includes("admin-view");return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("nav",{className:"bg-white fixed w-full z-20 top-0 left-0 border-b border-gray-200",children:(0,l.jsxs)("div",{className:"max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4",children:[(0,l.jsx)("div",{onClick:()=>g.push("/"),className:"flex items-center cursor-pointer",children:(0,l.jsx)("span",{className:"slef-center text-2xl font-semibold whitespace-nowrap",children:"Ecommercery"})}),(0,l.jsxs)("div",{className:"flex md:order-2 gap-2",children:[!w&&a?(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)("button",{className:"mt-1.5 inline-block bg-black px-5 py-3 text-xs font-medium upprcase tracking-wide text-white",onClick:()=>g.push("/account"),children:"Account"}),(0,l.jsx)("button",{className:"mt-1.5 inline-block bg-black px-5 py-3 text-xs font-medium upprcase tracking-wide text-white",onClick:()=>f(!0),children:"Cart"})]}):null,(null==n?void 0:n.role)==="admin"?w?(0,l.jsx)("button",{className:"mt-1.5 inline-block bg-black px-5 py-3 text-xs font-medium upprcase tracking-wide text-white",onClick:()=>g.push("/"),children:"Client View"}):(0,l.jsx)("button",{onClick:()=>g.push("/admin-view"),className:"mt-1.5 inline-block bg-black px-5 py-3 text-xs font-medium upprcase tracking-wide text-white",children:"Admin View"}):null,a?(0,l.jsx)("button",{onClick:function(){r(!1),s(null),d.Z.remove("token"),localStorage.clear(),g.push("/")},className:"mt-1.5 inline-block bg-black px-5 py-3 text-xs font-medium upprcase tracking-wide text-white",children:"Logout"}):(0,l.jsx)("button",{onClick:()=>g.push("/login"),className:"mt-1.5 inline-block bg-black px-5 py-3 text-xs font-medium upprcase tracking-wide text-white",children:"Login"}),(0,l.jsxs)("button",{"data-collapse-toggle":"navbar-sticky",type:"button",className:"inline-flex items-center p-2 text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600","aria-controls":"navbar-sticky","aria-expanded":"false",onClick:()=>t(!0),children:[(0,l.jsx)("span",{className:"sr-only",children:"Open main menu"}),(0,l.jsx)("svg",{className:"w-6 h-6","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{"fill-rule":"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})})]})]}),(0,l.jsx)(y,{router:g,isAdminView:w})]})}),(0,l.jsx)(c,{showModalTitle:!1,mainContent:(0,l.jsx)(y,{router:g,isModalView:!0,isAdminView:w}),show:e,setShow:t}),h&&(0,l.jsx)(x,{})]})}},5579:function(e,t,n){"use strict";n.r(t),n.d(t,{GlobalContext:function(){return r},default:function(){return u},initialCheckoutFormData:function(){return s}});var l=n(9268),i=n(1712),a=n(6008),o=n(6006);let r=(0,o.createContext)(null),s={shippingAddress:{},paymentMethod:"",totalPrice:0,isPaid:!1,paidAt:new Date,isProcessing:!0},c=["cart","checkout","account","orders","admin-view"],d=["/admin-view","/admin-view/add-product","/admin-view/all-products"];function u(e){let{children:t}=e,[n,u]=(0,o.useState)(!1),[p,m]=(0,o.useState)(!0),[h,x]=(0,o.useState)({loading:!1,id:""}),[y,f]=(0,o.useState)(null),[b,g]=(0,o.useState)(null),[w,j]=(0,o.useState)(null),[v,k]=(0,o.useState)(!1),[N,C]=(0,o.useState)([]),[I,S]=(0,o.useState)([]),[T,E]=(0,o.useState)({fullName:"",city:"",country:"",postalCode:"",address:""}),[P,D]=(0,o.useState)(s),[A,O]=(0,o.useState)([]),[G,F]=(0,o.useState)(null),[z,M]=(0,o.useState)([]),R=(0,a.useRouter)(),V=(0,a.usePathname)();return(0,o.useEffect)(()=>{if(void 0!==i.Z.get("token")){f(!0);let e=JSON.parse(localStorage.getItem("user"))||{},t=JSON.parse(localStorage.getItem("cartItems"))||[];g(e),C(t)}else f(!1),g({})},[i.Z]),(0,o.useEffect)(()=>{"/register"!==V&&!V.includes("product")&&"/"!==V&&b&&0===Object.keys(b).length&&c.includes(V)>-1&&R.push("/login")},[b,V]),(0,o.useEffect)(()=>{null!==b&&b&&Object.keys(b).length>0&&(null==b?void 0:b.role)!=="admin"&&d.indexOf(V)>-1&&R.push("/unauthorized-page")},[b,V]),(0,l.jsx)(r.Provider,{value:{showNavModal:n,setShowNavModal:u,pageLevelLoader:p,setPageLevelLoader:m,isAuthUser:y,setIsAuthUser:f,user:b,setUser:g,componentLevelLoader:h,setComponentLevelLoader:x,currentUpdatedProduct:w,setCurrentUpdatedProduct:j,showCartModal:v,setShowCartModal:k,cartItems:N,setCartItems:C,addresses:I,setAddresses:S,addressFormData:T,setAddressFormData:E,checkoutFormData:P,setCheckoutFormData:D,allOrdersForUser:A,setAllOrdersForUser:O,orderDetails:G,setOrderDetails:F,allOrdersForAllUsers:z,setAllOrdersForAllUsers:M},children:t})}},1273:function(e,t,n){"use strict";n.d(t,{EI:function(){return o},Xq:function(){return i},tQ:function(){return a}});var l=n(1712);let i=async e=>{try{let t=await fetch("/api/cart/add-to-cart",{method:"POST",headers:{"content-type":"application/json",Authorization:"Bearer ".concat(l.Z.get("token"))},body:JSON.stringify(e)}),n=await t.json();return n}catch(e){console.log(e)}},a=async e=>{try{let t=await fetch("http://localhost:3000/api/cart/all-cart-items?id=".concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(l.Z.get("token"))}}),n=await t.json();return n}catch(e){console.log(e)}},o=async e=>{try{let t=await fetch("/api/cart/delete-from-cart?id=".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(l.Z.get("token"))}}),n=await t.json();return n}catch(e){console.log(e)}}},8147:function(e,t,n){"use strict";n.d(t,{GP:function(){return u},GU:function(){return i},Hp:function(){return a},d2:function(){return r},jJ:function(){return s},mO:function(){return d},p8:function(){return l},qe:function(){return c},vV:function(){return o}});let l=[{id:"home",label:"Home",path:"/"},{id:"listing",label:"All Products",path:"/product/listing/all-products"},{id:"listingMen",label:"Men",path:"/product/listing/men"},{id:"listingWomen",label:"Women",path:"/product/listing/women"},{id:"listingKids",label:"kids",path:"/product/listing/kids"}],i=[{id:"adminListing",label:"Manage All Products",path:"/admin-view/all-products"},{id:"adminNewProduct",label:"Add New Product",path:"/admin-view/add-product"}],a=[{id:"name",type:"text",placeholder:"Enter your name",label:"Name",componentType:"input"},{id:"email",type:"email",placeholder:"Enter your email",label:"Email",componentType:"input"},{id:"password",type:"password",placeholder:"Enter your password",label:"Password",componentType:"input"},{id:"role",type:"",placeholder:"",label:"Role",componentType:"select",options:[{id:"admin",label:"Admin"},{id:"customer",label:"customer"}]}],o=[{id:"email",type:"email",placeholder:"Enter your email",label:"Email",componentType:"input"},{id:"password",type:"password",placeholder:"Enter your password",label:"Password",componentType:"input"}],r=[{id:"name",type:"text",placeholder:"Enter name",label:"Name",componentType:"input"},{id:"price",type:"number",placeholder:"Enter price",label:"Price",componentType:"input"},{id:"description",type:"text",placeholder:"Enter description",label:"Description",componentType:"input"},{id:"category",type:"",placeholder:"",label:"Category",componentType:"select",options:[{id:"men",label:"Men"},{id:"women",label:"Women"},{id:"kids",label:"Kids"}]},{id:"deliveryInfo",type:"text",placeholder:"Enter deliveryInfo",label:"Delivery Info",componentType:"input"},{id:"onSale",type:"",placeholder:"",label:"On Sale",componentType:"select",options:[{id:"yes",label:"Yes"},{id:"no",label:"No"}]},{id:"priceDrop",type:"number",placeholder:"Enter Price Drop",label:"Price Drop",componentType:"input"}],s=[{id:"s",label:"S"},{id:"m",label:"M"},{id:"l",label:"L"}],c={apiKey:"AIzaSyB0uLYyq6CVKV3WnR5CJX7IJEGxpJtBKKU",authDomain:"mlrit-d561f.firebaseapp.com",projectId:"mlrit-d561f",storageBucket:"mlrit-d561f.appspot.com",messagingSenderId:"463345053722",appId:"1:463345053722:web:028c8783a9aa52289421a3",measurementId:"G-19GGLWKHXF"},d="gs://mlrit-d561f.appspot.com",u=[{id:"fullName",type:"input",placeholder:"Enter your full name",label:"Full Name",componentType:"input"},{id:"address",type:"input",placeholder:"Enter your full address",label:"Address",componentType:"input"},{id:"city",type:"input",placeholder:"Enter your city",label:"City",componentType:"input"},{id:"country",type:"input",placeholder:"Enter your country",label:"Country",componentType:"input"},{id:"postalCode",type:"input",placeholder:"Enter your postal code",label:"Postal Code",componentType:"input"}]},8410:function(){}},function(e){e.O(0,[513,631,253,698,744],function(){return e(e.s=781)}),_N_E=e.O()}]);