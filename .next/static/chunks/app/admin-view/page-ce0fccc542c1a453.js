(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[25],{6178:function(e,t,n){Promise.resolve().then(n.bind(n,8907))},8907:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var r=n(9268),a=n(156),i=n(5579),o=n(8050),s=n(6006),c=n(2120);function l(){let{allOrdersForAllUsers:e,setAllOrdersForAllUsers:t,user:n,pageLevelLoader:l,setPageLevelLoader:d,componentLevelLoader:u,setComponentLevelLoader:f}=(0,s.useContext)(i.GlobalContext);async function p(){d(!0);let e=await (0,o.Bi)();console.log(e),e.success?(d(!1),t(e.data&&e.data.length?e.data.filter(e=>e.user._id!==n._id):[])):d(!1)}async function m(e){f({loading:!0,id:e._id});let t=await (0,o.wr)({...e,isProcessing:!1});t.success?(f({loading:!1,id:""}),p()):f({loading:!0,id:""})}return((0,s.useEffect)(()=>{null!==n&&p()},[n]),console.log(e),l)?(0,r.jsx)("div",{className:"w-full min-h-screen flex justify-center items-center",children:(0,r.jsx)(c.Z,{color:"#000000",loading:l,size:30,"data-testid":"loader"})}):(0,r.jsx)("section",{children:(0,r.jsx)("div",{className:"mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:"px-4 py-6 sm:px-8 sm:py-10",children:(0,r.jsx)("div",{className:"flow-root",children:e&&e.length?(0,r.jsx)("ul",{className:"flex flex-col gap-4",children:e.map(e=>{var t,n;return(0,r.jsxs)("li",{className:"bg-gray-200 shadow p-5 flex flex-col space-y-3 py-6 text-left",children:[(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsxs)("h1",{className:"font-bold text-lg mb-3 flex-1",children:["#order: ",e._id]}),(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("p",{className:"mr-3 text-sm font-medium text-gray-900",children:"User Name :"}),(0,r.jsx)("p",{className:"text-sm  font-semibold text-gray-900",children:null==e?void 0:null===(t=e.user)||void 0===t?void 0:t.name})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("p",{className:"mr-3 text-sm font-medium text-gray-900",children:"User Email :"}),(0,r.jsx)("p",{className:"text-sm  font-semibold text-gray-900",children:null==e?void 0:null===(n=e.user)||void 0===n?void 0:n.email})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("p",{className:"mr-3 text-sm font-medium text-gray-900",children:"Total Paid Amount :"}),(0,r.jsxs)("p",{className:"text-sm  font-semibold text-gray-900",children:["$",null==e?void 0:e.totalPrice]})]})]})]}),(0,r.jsx)("div",{className:"flex gap-2",children:e.orderItems.map((e,t)=>(0,r.jsx)("div",{className:"shrink-0",children:(0,r.jsx)("img",{alt:"Order Item",className:"h-24 w-24 max-w-full rounded-lg object-cover",src:e&&e.product&&e.product.imageUrl})},t))}),(0,r.jsxs)("div",{className:"flex gap-5",children:[(0,r.jsx)("button",{className:"disabled:opacity-50 mt-5 mr-5  inline-block bg-black text-white px-5 py-3 text-xs font-medium uppercase tracking-wide",children:e.isProcessing?"Order is Processing":"Order is delivered"}),(0,r.jsx)("button",{onClick:()=>m(e),disabled:!e.isProcessing,className:"disabled:opacity-50 mt-5 mr-5  inline-block bg-black text-white px-5 py-3 text-xs font-medium uppercase tracking-wide",children:u&&u.loading&&u.id===e._id?(0,r.jsx)(a.Z,{text:"Updating Order Status",color:"#ffffff",loading:u&&u.loading}):"Update Order Status"})]})]},e._id)})}):null})})})})})}},156:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(9268),a=n(2120);function i(e){let{text:t,color:n,loading:i,size:o}=e;return(0,r.jsxs)("span",{className:"flex gap-1 items-center",children:[t,(0,r.jsx)(a.Z,{color:n,loading:i,size:o||10,"data-testid":"loader"})]})}},5579:function(e,t,n){"use strict";n.r(t),n.d(t,{GlobalContext:function(){return s},default:function(){return u},initialCheckoutFormData:function(){return c}});var r=n(9268),a=n(1712),i=n(6008),o=n(6006);let s=(0,o.createContext)(null),c={shippingAddress:{},paymentMethod:"",totalPrice:0,isPaid:!1,paidAt:new Date,isProcessing:!0},l=["cart","checkout","account","orders","admin-view"],d=["/admin-view","/admin-view/add-product","/admin-view/all-products"];function u(e){let{children:t}=e,[n,u]=(0,o.useState)(!1),[f,p]=(0,o.useState)(!0),[m,h]=(0,o.useState)({loading:!1,id:""}),[x,g]=(0,o.useState)(null),[v,y]=(0,o.useState)(null),[b,j]=(0,o.useState)(null),[w,O]=(0,o.useState)(!1),[N,S]=(0,o.useState)([]),[k,_]=(0,o.useState)([]),[C,E]=(0,o.useState)({fullName:"",city:"",country:"",postalCode:"",address:""}),[P,I]=(0,o.useState)(c),[R,U]=(0,o.useState)([]),[z,Z]=(0,o.useState)(null),[A,B]=(0,o.useState)([]),T=(0,i.useRouter)(),D=(0,i.usePathname)();return(0,o.useEffect)(()=>{if(void 0!==a.Z.get("token")){g(!0);let e=JSON.parse(localStorage.getItem("user"))||{},t=JSON.parse(localStorage.getItem("cartItems"))||[];y(e),S(t)}else g(!1),y({})},[a.Z]),(0,o.useEffect)(()=>{"/register"!==D&&!D.includes("product")&&"/"!==D&&v&&0===Object.keys(v).length&&l.includes(D)>-1&&T.push("/login")},[v,D]),(0,o.useEffect)(()=>{null!==v&&v&&Object.keys(v).length>0&&(null==v?void 0:v.role)!=="admin"&&d.indexOf(D)>-1&&T.push("/unauthorized-page")},[v,D]),(0,r.jsx)(s.Provider,{value:{showNavModal:n,setShowNavModal:u,pageLevelLoader:f,setPageLevelLoader:p,isAuthUser:x,setIsAuthUser:g,user:v,setUser:y,componentLevelLoader:m,setComponentLevelLoader:h,currentUpdatedProduct:b,setCurrentUpdatedProduct:j,showCartModal:w,setShowCartModal:O,cartItems:N,setCartItems:S,addresses:k,setAddresses:_,addressFormData:C,setAddressFormData:E,checkoutFormData:P,setCheckoutFormData:I,allOrdersForUser:R,setAllOrdersForUser:U,orderDetails:z,setOrderDetails:Z,allOrdersForAllUsers:A,setAllOrdersForAllUsers:B},children:t})}},8050:function(e,t,n){"use strict";n.d(t,{Bi:function(){return s},ax:function(){return i},mg:function(){return a},s$:function(){return o},wr:function(){return c}});var r=n(1712);let a=async e=>{try{let t=await fetch("/api/order/create-order",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r.Z.get("token"))},body:JSON.stringify(e)}),n=await t.json();return n}catch(e){console.log(e)}},i=async e=>{try{let t=await fetch("/api/order/get-all-orders?id=".concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(r.Z.get("token"))}}),n=await t.json();return n}catch(e){console.log(e)}},o=async e=>{try{let t=await fetch("/api/order/order-details?id=".concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(r.Z.get("token"))}}),n=await t.json();return n}catch(e){console.log(e)}},s=async()=>{try{let e=await fetch("/api/admin/orders/get-all-orders",{method:"GET",headers:{Authorization:"Bearer ".concat(r.Z.get("token"))}}),t=await e.json();return t}catch(e){console.log(e)}},c=async e=>{try{let t=await fetch("/api/admin/orders/update-order",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r.Z.get("token"))},body:JSON.stringify(e)}),n=await t.json();return n}catch(e){console.log(e)}}},3177:function(e,t,n){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(6006),a=Symbol.for("react.element"),i=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,i={},l=null,d=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(d=t.ref),t)o.call(t,r)&&!c.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:a,type:e,key:l,ref:d,props:i,_owner:s.current}}t.Fragment=i,t.jsx=l,t.jsxs=l},9268:function(e,t,n){"use strict";e.exports=n(3177)},6008:function(e,t,n){e.exports=n(4e3)},2120:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(6006),a={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function i(e){var t=function(e){if("number"==typeof e)return{value:e,unit:"px"};var t,n=(e.match(/^[0-9.]*/)||"").toString();t=n.includes(".")?parseFloat(n):parseInt(n,10);var r=(e.match(/[^0-9]*$/)||"").toString();return a[r]?{value:t,unit:r}:(console.warn("React Spinners: ".concat(e," is not a valid css value. Defaulting to ").concat(t,"px.")),{value:t,unit:"px"})}(e);return"".concat(t.value).concat(t.unit)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)0>t.indexOf(r[a])&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n},c=function(e,t,n){var r="react-spinners-".concat(e,"-").concat(n);if("undefined"==typeof window||!window.document)return r;var a=document.createElement("style");document.head.appendChild(a);var i=a.sheet,o="\n    @keyframes ".concat(r," {\n      ").concat(t,"\n    }\n  ");return i&&i.insertRule(o,0),r}("PulseLoader","0% {transform: scale(1); opacity: 1} 45% {transform: scale(0.1); opacity: 0.7} 80% {transform: scale(1); opacity: 1}","pulse"),l=function(e){var t=e.loading,n=e.color,a=void 0===n?"#000000":n,l=e.speedMultiplier,d=void 0===l?1:l,u=e.cssOverride,f=e.size,p=void 0===f?15:f,m=e.margin,h=void 0===m?2:m,x=s(e,["loading","color","speedMultiplier","cssOverride","size","margin"]),g=o({display:"inherit"},void 0===u?{}:u),v=function(e){return{backgroundColor:a,width:i(p),height:i(p),margin:i(h),borderRadius:"100%",display:"inline-block",animation:"".concat(c," ").concat(.75/d,"s ").concat(.12*e/d,"s infinite cubic-bezier(0.2, 0.68, 0.18, 1.08)"),animationFillMode:"both"}};return void 0===t||t?r.createElement("span",o({style:g},x),r.createElement("span",{style:v(1)}),r.createElement("span",{style:v(2)}),r.createElement("span",{style:v(3)})):null}},1712:function(e,t,n){"use strict";/*! js-cookie v3.0.5 | MIT */function r(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}n.d(t,{Z:function(){return a}});var a=function e(t,n){function a(e,a,i){if("undefined"!=typeof document){"number"==typeof(i=r({},n,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var s in i)i[s]&&(o+="; "+s,!0!==i[s]&&(o+="="+i[s].split(";")[0]));return document.cookie=e+"="+t.write(a,e)+o}}return Object.create({set:a,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],r={},a=0;a<n.length;a++){var i=n[a].split("="),o=i.slice(1).join("=");try{var s=decodeURIComponent(i[0]);if(r[s]=t.read(o,s),e===s)break}catch(e){}}return e?r[e]:r}},remove:function(e,t){a(e,"",r({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,r({},this.attributes,t))},withConverter:function(t){return e(r({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}},function(e){e.O(0,[253,698,744],function(){return e(e.s=6178)}),_N_E=e.O()}]);